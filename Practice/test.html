<!Doctype HTML>
<html>

<head></head>

<body>
    <canvas id='pong' width="800" height="600"></canvas>
    <script>
        var p1y = p2y = 40;
        var pthick = 10;
        var pheight = 100;
        bx = by = 50;
        bdim = 4;
        xvel = yvel = 4;
        score1 = score2 = 0;
        compSpeed = 4;

        window.onload = function () {
            debugger;
            c = document.getElementById('pong');
            ctx = c.getContext('2d');
            setInterval(update, 1000 / 30);
            c.addEventListener('mousemove', function (e) {
                p1y = e.clientY - pheight / 2;
            });
        }

        function reset() {
            bx = c.width / 2;
            by = c.height / 2;
            xvel = -xvel;
            yvel = 3;
        }

        function update() {
            bx += xvel;
            by += yvel;

            if (by < 0 && yv < 0) {
                by = -yv;
            }

            if (by > ctx.height && yv > 0) {
                by = -yv;
            }

            if (bx < 0) {
                if (by > p1y && by < p1y + pheight) {
                    xv = -xv;
                    dy = by - (p1y + pheight / 2);
                    yv = dy * 0.3;
                }
                else {
                    score2++;
                    reset();
                }
            }

            if (bx > ctx.width) {
                if (by > p2y && by < p2y + pheight) {
                    xv = -xv;
                    dt = by - (p2y + pheight / 2);
                    yv = by * 0.3;
                }
                else {
                    score1++;
                    reset();
                }
            }

            if (p2y + pheight / 2 < by) {
                p2y += compspeed;
            }
            else {
                p2y -= compspeed;
            }
        }
    </script>
</body>

</html>